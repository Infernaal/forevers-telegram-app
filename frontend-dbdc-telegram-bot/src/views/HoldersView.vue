<template>
  <div class="holders-view">
    <!-- Content Container - stretched to top -->
    <div class="content-container">
      
      <!-- Referral Program Header -->
      <div class="referral-header">
        <h1 class="referral-title">Referral Program</h1>
        <p class="referral-subtitle">Share the QR-code with your friends.</p>
      </div>

      <!-- Scroll Content Container -->
      <div class="scroll-content">
        
        <!-- QR Code Section -->
        <div class="qr-section">
          <!-- Background with gradient -->
          <div class="qr-background">
            <!-- Decorative F Icons -->
            <svg class="f-icon f-icon-1" width="120" height="131" viewBox="0 0 120 131" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.1">
                <g clip-path="url(#clip0_2_20036)">
                  <path d="M107.496 65.3312L67.7265 22.9094C65.9756 21.0418 63.3909 20.9584 61.5233 22.7093L51.9517 31.6826C50.0177 33.4957 46.9801 33.3977 45.167 31.4637L37.4276 23.2082C37.2722 23.0425 37.1069 22.8853 36.9223 22.7529C34.9485 21.338 32.509 21.3362 30.7243 23.0093C28.8567 24.7602 28.7733 27.3448 30.5242 29.2125L38.497 37.7168C40.3101 39.6508 40.2121 42.6884 38.2781 44.5015L11.8979 69.2327C10.0303 70.9836 9.94687 73.5682 11.6978 75.4359C13.4486 77.3035 16.0333 77.3869 17.9009 75.636L28.2729 65.9123C30.2069 64.0992 33.2445 64.1973 35.0576 66.1312L44.5311 76.2364C46.282 78.104 48.8666 78.1874 50.7342 76.4365C52.6019 74.6857 52.6853 72.101 50.9344 70.2334L41.4609 60.1282C39.6478 58.1942 39.7458 55.1566 41.6797 53.3435L44.5479 50.6547C46.4819 48.8416 49.5195 48.9396 51.3326 50.8736L72.3119 73.2517C74.0628 75.1193 76.6474 75.2027 78.515 73.4518C80.3827 71.7009 80.466 69.1163 78.7152 67.2487L57.7359 44.8705C55.9228 42.9366 56.0208 39.8989 57.9548 38.0858L60.8229 35.397C62.7569 33.5839 65.7945 33.6819 67.6076 35.6159L100.843 71.0674C102.594 72.935 105.179 73.0184 107.046 71.2675C108.914 69.5166 109.247 67.1988 107.496 65.3312Z" fill="#FAFAFA"/>
                </g>
              </g>
              <defs>
                <clipPath id="clip0_2_20036">
                  <rect x="54.1885" y="-5.56738" width="96" height="96" rx="4.8" transform="rotate(46.8479 54.1885 -5.56738)" fill="white"/>
                </clipPath>
              </defs>
            </svg>

            <svg class="f-icon f-icon-2" width="66" height="66" viewBox="0 0 66 66" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.1">
                <g clip-path="url(#clip0_2_20038)">
                  <path d="M25.6898 61.2584L51.0293 47.0026C52.1448 46.375 52.4934 45.1299 51.8658 44.0143L48.6493 38.297C47.9993 37.1418 48.409 35.6784 49.5642 35.0285L54.4954 32.2543C54.5944 32.1986 54.6904 32.137 54.7767 32.0632C55.699 31.2733 55.9906 30.089 55.3909 29.023C54.7633 27.9074 53.5181 27.5588 52.4026 28.1865L47.3227 31.0443C46.1675 31.6943 44.7042 31.2846 44.0542 30.1294L35.1892 14.3719C34.5616 13.2564 33.3165 12.9078 32.2009 13.5354C31.0853 14.1631 30.7368 15.4082 31.3644 16.5238L34.8499 22.7192C35.4998 23.8744 35.0902 25.3377 33.935 25.9876L27.8989 29.3835C26.7833 30.0111 26.4348 31.2562 27.0624 32.3718C27.69 33.4874 28.9352 33.8359 30.0507 33.2083L36.0868 29.8125C37.242 29.1626 38.7053 29.5722 39.3552 30.7274L40.3191 32.4406C40.969 33.5958 40.5594 35.0592 39.4042 35.7091L26.0372 43.2292C24.9216 43.8568 24.5731 45.102 25.2007 46.2175C25.8283 47.3331 27.0734 47.6816 28.189 47.054L41.556 39.5339C42.7112 38.884 44.1745 39.2936 44.8244 40.4488L45.7883 42.162C46.4382 43.3172 46.0286 44.7806 44.8733 45.4305L23.6974 57.3439C22.5818 57.9715 22.2333 59.2167 22.8609 60.3322C23.4885 61.4478 24.5743 61.886 25.6898 61.2584Z" fill="#1E5DFF"/>
                </g>
              </g>
              <defs>
                <clipPath id="clip0_2_20038">
                  <rect x="65.6865" y="42.4282" width="48" height="48" rx="2.4" transform="rotate(150.638 65.6865 42.4282)" fill="white"/>
                </clipPath>
              </defs>
            </svg>

            <svg class="f-icon f-icon-3" width="155" height="177" viewBox="0 0 155 177" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.1">
                <g clip-path="url(#clip0_2_20040)">
                  <path d="M85.163 16.9519L19.125 57.5734C16.2177 59.3618 15.4184 62.7159 17.2068 65.6232L26.3722 80.5233C28.2241 83.5339 27.2848 87.4758 24.2742 89.3277L11.4228 97.2329C11.1649 97.3916 10.9153 97.5656 10.6932 97.7714C8.31768 99.9719 7.66372 103.158 9.37267 105.936C11.161 108.844 14.5151 109.643 17.4224 107.855L30.6612 99.7111C33.6718 97.8591 37.6137 98.7985 39.4656 101.809L64.7264 142.875C66.5147 145.782 69.8688 146.582 72.7761 144.793C75.6835 143.005 76.4827 139.651 74.6944 136.744L64.7625 120.598C62.9106 117.587 63.8499 113.645 66.8606 111.793L82.5913 102.117C85.4986 100.328 86.2979 96.9743 84.5095 94.067C82.7212 91.1596 79.3671 90.3604 76.4598 92.1487L60.729 101.825C57.7184 103.677 53.7765 102.738 51.9246 99.7271L49.1781 95.2622C47.3262 92.2516 48.2656 88.3097 51.2762 86.4578L86.1123 65.0293C89.0196 63.2409 89.8189 59.8868 88.0305 56.9795C86.2421 54.0721 82.888 53.2729 79.9807 55.0613L45.1446 76.4898C42.134 78.3417 38.1921 77.4024 36.3402 74.3917L33.5938 69.9269C31.7419 66.9163 32.6812 62.9744 35.6918 61.1225L90.8792 27.1753C93.7865 25.387 94.5858 22.0329 92.7974 19.1256C91.009 16.2182 88.0703 15.1635 85.163 16.9519Z" fill="#FAFAFA"/>
                </g>
              </g>
              <defs>
                <clipPath id="clip0_2_20040">
                  <rect x="-21.6904" y="67.6526" width="128" height="128" rx="6.4" transform="rotate(-31.5967 -21.6904 67.6526)" fill="white"/>
                </clipPath>
              </defs>
            </svg>

            <svg class="f-icon f-icon-4" width="133" height="134" viewBox="0 0 133 134" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.1">
                <g clip-path="url(#clip0_2_20042)">
                  <path d="M80.6837 123.072L111.479 73.7471C112.834 71.5756 112.252 69.0561 110.08 67.7003L98.9511 60.7521C96.7024 59.3482 96.0176 56.3872 97.4215 54.1385L103.414 44.5396C103.535 44.3469 103.644 44.1467 103.725 43.9344C104.586 41.6636 103.961 39.3054 101.886 38.0098C99.7148 36.6541 97.1954 37.2368 95.8396 39.4083L89.6661 49.2965C88.2622 51.5452 85.3011 52.23 83.0524 50.8261L52.3796 31.6761C50.2081 30.3203 47.6886 30.903 46.3328 33.0746C44.9771 35.2461 45.5598 37.7656 47.7313 39.1213L59.791 46.6506C62.0397 48.0545 62.7245 51.0155 61.3206 53.2642L53.985 65.0138C52.6293 67.1853 53.212 69.7048 55.3835 71.0605C57.555 72.4163 60.0745 71.8336 61.4303 69.662L68.7659 57.9125C70.1698 55.6638 73.1308 54.979 75.3795 56.3829L78.7144 58.465C80.9631 59.8689 81.6479 62.83 80.2439 65.0786L63.9991 91.0982C62.6434 93.2697 63.2261 95.7892 65.3976 97.145C67.5691 98.5007 70.0886 97.918 71.4444 95.7465L87.6892 69.7269C89.0931 67.4783 92.0541 66.7934 94.3028 68.1974L97.6377 70.2794C99.8864 71.6833 100.571 74.6444 99.1673 76.8931L73.4322 118.113C72.0764 120.285 72.6591 122.804 74.8307 124.16C77.0022 125.516 79.328 125.243 80.6837 123.072Z" fill="#1E5DFF"/>
                </g>
              </g>
              <defs>
                <clipPath id="clip0_2_20042">
                  <rect x="132.813" y="51.6599" width="96" height="96" rx="4.8" transform="rotate(121.978 132.813 51.6599)" fill="white"/>
                </clipPath>
              </defs>
            </svg>
          </div>

          <!-- QR Code Container -->
          <div class="qr-code-container">
            <div class="qr-code-wrapper">
              <!-- QR Code Image -->
              <img 
                src="https://api.builder.io/api/v1/image/assets/TEMP/d0e1d46df412099f6abe582c7574e9c4a57f8399?width=280" 
                alt="QR Code" 
                class="qr-code-image"
              />
              <!-- QR Code Link -->
              <div class="qr-code-link">vm.dubadu/jjhI1uT4S</div>
            </div>
          </div>
        </div>

        <!-- Terms and Conditions -->
        <div class="terms-checkbox-wrapper">
          <TermsCheckbox
            v-model="termsAccepted"
            @open-terms="openTerms"
          />
        </div>

        <!-- Share Button -->
        <div class="share-button-container">
          <button
            class="share-button"
            :class="{ 'share-button-disabled': !termsAccepted, 'share-button-loading': isSharing }"
            :disabled="!termsAccepted || isSharing"
            @click="shareQRCode"
          >
            <span v-if="!isSharing">Share QR code</span>
            <span v-else class="flex items-center gap-2">
              <svg class="animate-spin h-4 w-4" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Sharing...
            </span>
          </button>
        </div>

      </div>

      <!-- How to use the Link Section -->
      <div class="how-to-section">
        <!-- Steps Container -->
        <div class="steps-container">
          <!-- Header -->
          <div class="how-to-header">
            <h2 class="how-to-title">How to use the Link</h2>
            <p class="how-to-subtitle">Follow these 3 simple steps</p>
          </div>

          <!-- Step Indicators -->
          <div class="step-indicators">
            <div class="step-indicator-row">
              <div class="step-line step-line-1"></div>
              <div class="step-line step-line-2"></div>
              <div class="step-indicator step-indicator-1"></div>
              <div class="step-indicator step-indicator-2"></div>
              <div class="step-indicator step-indicator-3"></div>
            </div>
          </div>

          <!-- Step Descriptions -->
          <div class="step-descriptions">
            <div class="step-description step-description-1">
              <div class="step-number-row">
                <div class="step-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.34C15.11 18.55 15.08 18.77 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z" fill="#7E7E7E"/>
                  </svg>
                </div>
                <span class="step-number">1</span>
              </div>
              <span class="step-text">Share your link</span>
            </div>
            <div class="step-description step-description-2">
              <div class="step-number-row">
                <div class="step-icon">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM17 13H11V7H13V11H17V13Z" fill="#7E7E7E"/>
                  </svg>
                </div>
                <span class="step-number">2</span>
              </div>
              <span class="step-text">Wait for joining</span>
            </div>
            <div class="step-description step-description-3">
              <div class="step-number-row">
                <div class="step-icon">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L15.09 8.26L22 9L17 13.74L18.18 20.74L12 17.77L5.82 20.74L7 13.74L2 9L8.91 8.26L12 2Z" fill="#7E7E7E"/>
                  </svg>
                </div>
                <span class="step-number">3</span>
              </div>
              <span class="step-text">Get rewards</span>
            </div>
          </div>
        </div>

        <!-- Web Referral Link Section -->
        <div class="web-link-section">
          <!-- Background -->
          <div class="web-link-background"></div>
          
          <!-- Content -->
          <div class="web-link-content">
            <div class="web-link-header">
              <h3 class="web-link-title">Web Referral Link</h3>
              <p class="web-link-description">Copy the link bellow and share with your friends.</p>
            </div>
            
            <!-- Copy Link Container -->
            <div class="copy-link-container" :class="{ 'copy-link-copied-state': linkCopied }">
              <div v-if="!linkCopied" class="copy-link-input-wrapper">
                <span class="copy-link-text">vm.dubadu/jjhI1uT4S</span>
              </div>
              <div v-if="linkCopied" class="copy-link-copied-full">
                <span class="copy-link-copied-text">Copied</span>
                <div class="copy-link-copied-icon">
                  <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="14" cy="14" r="14" fill="white"/>
                  </svg>
                  <svg class="copy-tick-svg" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_2_22327)">
                      <path d="M11.3242 0.926106C10.7978 0.642629 10.2106 1.18934 9.86633 1.51331C9.07667 2.28275 8.40848 3.17368 7.65925 3.98362C6.82907 4.87455 6.05963 5.76548 5.20919 6.6362C4.72323 7.12216 4.19677 7.64862 3.8728 8.25607C3.14385 7.54734 2.51615 6.7779 1.70621 6.15023C1.11901 5.70477 0.147086 5.38079 0.167334 6.45396C0.207831 7.85113 1.44299 9.34952 2.35416 10.3012C2.73888 10.7061 3.24509 11.1313 3.8323 11.1516C4.54099 11.1921 5.26994 10.3417 5.69515 9.87594C6.44438 9.06601 7.05183 8.15479 7.74024 7.32464C8.63118 6.23123 9.54236 5.15803 10.413 4.04436C10.9597 3.35592 12.6809 1.65502 11.3242 0.926106ZM1.05823 6.37297C1.03798 6.37297 1.01773 6.37297 0.977238 6.39318C0.896244 6.37297 0.835499 6.35268 0.754505 6.31219C0.815251 6.27169 0.916493 6.29194 1.05823 6.37297Z" fill="#07B80E"/>
                    </g>
                    <defs>
                      <clipPath id="clip0_2_22327">
                        <rect width="11.6667" height="11.6667" fill="white" transform="translate(0.166992 0.166504)"/>
                      </clipPath>
                    </defs>
                  </svg>
                </div>
              </div>
              <button
                v-if="!linkCopied"
                class="copy-button"
                @click="copyWebLink"
              >
                <div class="copy-icon">
                  <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.0655 0.5H7.60611C6.97596 0.5 6.37161 0.727045 5.92603 1.13119C5.48044 1.53533 5.23011 2.08346 5.23011 2.65501V3.48385H4.04211C3.38111 3.48385 2.74718 3.72201 2.27978 4.14594C1.81239 4.56986 1.5498 5.14483 1.5498 5.74435V19.2395C1.5498 19.839 1.81239 20.414 2.27978 20.8379C2.74718 21.2618 3.38111 21.5 4.04211 21.5H14.2772C14.9382 21.5 15.5721 21.2618 16.0395 20.8379C16.5069 20.414 16.7695 19.839 16.7695 19.2395V18.486H18.0655C18.6907 18.4861 19.291 18.2634 19.7369 17.866C20.1829 17.4685 20.4389 16.9281 20.4498 16.3611V2.65501C20.4476 2.08277 20.1954 1.53465 19.7485 1.13073C19.3016 0.7268 18.6964 0.499997 18.0655 0.5ZM15.108 19.2395C15.108 19.4393 15.0204 19.631 14.8646 19.7723C14.7088 19.9136 14.4975 19.993 14.2772 19.993H4.04211C3.82178 19.993 3.61047 19.9136 3.45467 19.7723C3.29887 19.631 3.21134 19.4393 3.21134 19.2395V5.74435C3.21134 5.54451 3.29887 5.35285 3.45467 5.21154C3.61047 5.07024 3.82178 4.99085 4.04211 4.99085H14.2772C14.4975 4.99085 14.7088 5.07024 14.8646 5.21154C15.0204 5.35285 15.108 5.54451 15.108 5.74435V19.2395ZM18.7883 16.3611C18.7861 16.5337 18.709 16.6985 18.5737 16.8198C18.4383 16.9411 18.2558 17.0092 18.0655 17.0092H16.7695V5.74435C16.7695 5.14483 16.5069 4.56986 16.0395 4.14594C15.5721 3.72201 14.9382 3.48385 14.2772 3.48385H6.89165V2.65501C6.89165 2.48314 6.96693 2.31832 7.10091 2.19679C7.2349 2.07527 7.41663 2.007 7.60611 2.007H18.0655C18.16 2.006 18.2538 2.02203 18.3415 2.05414C18.4291 2.08626 18.5089 2.13384 18.5761 2.19411C18.6433 2.25438 18.6967 2.32616 18.7331 2.40527C18.7695 2.48439 18.7883 2.56927 18.7883 2.65501V16.3611Z" fill="#2019CE"/>
                  </svg>
                </div>
              </button>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Bottom Navigation Component -->
    <BottomNavigation />

    <!-- Terms and Conditions Modal -->
    <TermsAndConditionsModal
      :isVisible="showTermsModal"
      @close="closeTermsModal"
      @agree="agreeToTerms"
    />

    <!-- Success Notification -->
    <SuccessNotification
      :is-visible="showSuccessNotification"
      :message="successMessage"
      @close="hideSuccessNotification"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import BottomNavigation from '../components/BottomNavigation.vue'
import TermsAndConditionsModal from '../components/TermsAndConditionsModal.vue'
import SuccessNotification from '../components/SuccessNotification.vue'
import TermsCheckbox from '../components/TermsCheckbox.vue'

// Reactive data
const termsAccepted = ref(false)
const linkCopied = ref(false)
const referralLink = ref('vm.dubadu/jjhI1uT4S')
const showTermsModal = ref(false)

// Success notification
const showSuccessNotification = ref(false)
const successMessage = ref('')
const isSharing = ref(false)
let successTimeout = null

// Methods
const shareQRCode = () => {
  if (!termsAccepted.value || isSharing.value) return

  console.log('Sharing QR code...')
  isSharing.value = true

  // Safety timeout to prevent spinner from getting stuck
  const safetyTimeout = setTimeout(() => {
    if (isSharing.value) {
      console.log('Safety timeout triggered - stopping spinner')
      isSharing.value = false
    }
  }, 15000) // 15 seconds safety timeout

  // Add haptic feedback
  if (window.triggerHaptic) {
    window.triggerHaptic('impact', 'light')
  }

  // Try standard Web Share API first (works on most platforms including Telegram, Viber, etc.)
  if (navigator.share) {
    navigator.share({
      title: 'DBD Capital Forevers Bot',
      text: 'Join me on DBD Capital Forevers Bot! ðŸš€',
      url: referralLink.value
    }).then(() => {
      // Sharing was successful
      clearTimeout(safetyTimeout)
      isSharing.value = false
      showSuccessMessage('Referral QR-code sent successfully')
    }).catch((error) => {
      console.log('Web Share API failed or cancelled:', error)
      clearTimeout(safetyTimeout)
      isSharing.value = false

      // If user didn't cancel (AbortError), try Telegram-specific sharing
      if (error.name !== 'AbortError') {
        telegramFallback(safetyTimeout)
      }
    })
  } else {
    // Web Share API not available, try Telegram-specific sharing
    telegramFallback(safetyTimeout)
  }
}

const telegramFallback = (safetyTimeout = null) => {
  // Use Telegram WebApp sharing if available
  if (window.Telegram && window.Telegram.WebApp) {
    const tg = window.Telegram.WebApp

    try {
      // Use Telegram's openTelegramLink for sharing (compatible with version 6.0)
      const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(referralLink.value)}&text=${encodeURIComponent('Join me on DBD Capital Forevers Bot! ðŸš€')}`
      tg.openTelegramLink(shareUrl)

      // Set up event listener for when user returns to app
      const handleVisibilityChange = () => {
        if (!document.hidden) {
          // User returned to the app, likely after sharing
          if (safetyTimeout) clearTimeout(safetyTimeout)
          isSharing.value = false
          setTimeout(() => {
            showSuccessMessage('Referral QR-code sent successfully')
          }, 500)
          document.removeEventListener('visibilitychange', handleVisibilityChange)
        }
      }

      document.addEventListener('visibilitychange', handleVisibilityChange)

      // Cleanup listener after 30 seconds if user doesn't return
      setTimeout(() => {
        document.removeEventListener('visibilitychange', handleVisibilityChange)
        if (safetyTimeout) clearTimeout(safetyTimeout)
        isSharing.value = false
      }, 30000)

    } catch (error) {
      console.error('Telegram share failed:', error)
      if (safetyTimeout) clearTimeout(safetyTimeout)
      isSharing.value = false
      // Final fallback to clipboard
      copyLink()
    }
  } else {
    // Not in Telegram environment, copy to clipboard
    if (safetyTimeout) clearTimeout(safetyTimeout)
    isSharing.value = false
    copyLink()
  }
}

const fallbackShare = () => {
  // This function is no longer used, but keeping for backwards compatibility
  telegramFallback()
}

const copyLink = async () => {
  let copySuccess = false

  // Try modern clipboard API first
  if (navigator.clipboard) {
    try {
      await navigator.clipboard.writeText(referralLink.value)
      copySuccess = true
    } catch (clipboardErr) {
      console.log('Clipboard API failed, trying fallback method')
    }
  }

  // If clipboard API failed or is not available, use fallback
  if (!copySuccess) {
    try {
      const textArea = document.createElement('textarea')
      textArea.value = referralLink.value
      textArea.style.position = 'fixed'
      textArea.style.left = '-999999px'
      textArea.style.top = '-999999px'
      textArea.style.opacity = '0'
      document.body.appendChild(textArea)
      textArea.focus()
      textArea.select()

      const successful = document.execCommand('copy')
      document.body.removeChild(textArea)

      if (!successful) {
        console.log('Fallback copy method also failed')
      }
    } catch (fallbackErr) {
      console.error('Fallback copy failed:', fallbackErr)
    }
  }

  // Show success notification when called from share button
  showSuccessMessage('Link copied to clipboard')

  // Also show copied state for user feedback
  linkCopied.value = true
  setTimeout(() => {
    linkCopied.value = false
  }, 2000)
}

const copyWebLink = async () => {
  let copySuccess = false

  // Try modern clipboard API first
  if (navigator.clipboard) {
    try {
      await navigator.clipboard.writeText(referralLink.value)
      copySuccess = true
    } catch (clipboardErr) {
      console.log('Clipboard API failed, trying fallback method')
    }
  }

  // If clipboard API failed or is not available, use fallback
  if (!copySuccess) {
    try {
      const textArea = document.createElement('textarea')
      textArea.value = referralLink.value
      textArea.style.position = 'fixed'
      textArea.style.left = '-999999px'
      textArea.style.top = '-999999px'
      textArea.style.opacity = '0'
      document.body.appendChild(textArea)
      textArea.focus()
      textArea.select()

      const successful = document.execCommand('copy')
      document.body.removeChild(textArea)

      if (!successful) {
        console.log('Fallback copy method also failed')
      }
    } catch (fallbackErr) {
      console.error('Fallback copy failed:', fallbackErr)
    }
  }

  // Always show copied state for user feedback
  linkCopied.value = true
  setTimeout(() => {
    linkCopied.value = false
  }, 2500)
}

const openTerms = () => {
  showTermsModal.value = true
}

const closeTermsModal = () => {
  showTermsModal.value = false
}

const agreeToTerms = () => {
  termsAccepted.value = true
  showTermsModal.value = false
}

const showSuccessMessage = (message) => {
  successMessage.value = message
  showSuccessNotification.value = true

  // Add haptic feedback for success
  if (window.triggerHaptic) {
    window.triggerHaptic('notification', 'success')
  }

  // Clear existing timeout
  if (successTimeout) {
    clearTimeout(successTimeout)
  }

  // Auto-hide after 3 seconds
  successTimeout = setTimeout(() => {
    showSuccessNotification.value = false
  }, 3000)
}

const hideSuccessNotification = () => {
  showSuccessNotification.value = false
  if (successTimeout) {
    clearTimeout(successTimeout)
    successTimeout = null
  }
}
</script>

<style scoped>
.holders-view {
  font-family: 'Montserrat', sans-serif;
  width: 100%;
  min-height: 100vh;
  background: #F0F0F0;
  position: relative;
  margin: 0 auto;
  max-width: 375px;
  overflow-y: auto;
  overflow-x: hidden;
  /* Hide scrollbar for webkit browsers */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

.holders-view::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Content Container - now starts from top */
.content-container {
  width: 100%;
  min-height: calc(100vh + 200px); /* Allow content to extend beyond viewport */
  background: #F0F0F0;
  position: relative;
  padding: 20px 0 80px 0; /* Further reduced bottom padding */
}

/* Referral Program Header */
.referral-header {
  display: flex;
  width: 299px;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  position: relative;
  left: 14px;
  margin-bottom: 20px;
  height: 52px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .referral-header {
    width: calc(100vw - 64px);
    left: 32px;
    gap: 8px;
    height: 70px;
    margin-bottom: 32px;
  }
}



.referral-title {
  color: #02070E;
  font-family: Montserrat;
  font-size: 20px;
  font-weight: 700;
  line-height: 24px;
  margin: 0;
  align-self: stretch;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .referral-title {
    font-size: 28px;
    line-height: 34px;
  }
}



.referral-subtitle {
  color: #4B4D50;
  font-family: Montserrat;
  font-size: 16px;
  font-weight: 500;
  line-height: 24px;
  margin: 0;
  align-self: stretch;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .referral-subtitle {
    font-size: 20px;
    line-height: 28px;
  }
}



/* Scroll Content */
.scroll-content {
  display: flex;
  width: 347px;
  flex-direction: column;
  justify-content: flex-end;
  align-items: flex-start;
  gap: 20px;
  position: relative;
  left: 14px;
  height: 507px;
  margin-top: 60px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .scroll-content {
    width: calc(100vw - 64px);
    left: 32px;
    gap: 24px;
    height: auto;
    min-height: 650px;
    margin-top: 80px;
  }
}



/* QR Section */
.qr-section {
  width: 347px;
  height: 396px;
  position: absolute;
  left: 0;
  top: 0;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .qr-section {
    width: 100%;
    height: 500px;
    position: relative;
    margin-bottom: 32px;
  }
}

.qr-background {
  width: 100%;
  height: 100%;
  border-radius: 24px;
  background: linear-gradient(93deg, #000482 33.15%, rgba(3, 0, 155, 0.84) 76.97%);
  backdrop-filter: blur(32px);
  position: absolute;
  top: 0;
  left: 0;
  overflow: hidden;
}

/* Decorative F Icons */
.f-icon {
  position: absolute;
  z-index: 1;
  opacity: 0.1;
}

.f-icon-1 {
  width: 120px;
  height: 120px;
  transform: rotate(46.848deg);
  left: -20px;
  top: -10px;
}

.f-icon-2 {
  width: 60px;
  height: 60px;
  transform: rotate(150.638deg);
  left: 270px;
  top: 180px;
}

.f-icon-3 {
  width: 150px;
  height: 150px;
  transform: rotate(-31.597deg);
  left: -30px;
  top: 185px;
}

.f-icon-4 {
  width: 120px;
  height: 120px;
  transform: rotate(121.978deg);
  left: 200px;
  top: 15px;
}

/* QR Code Container */
.qr-code-container {
  width: 222px;
  height: 220px;
  position: absolute;
  left: 63px;
  top: 24px;
  z-index: 10;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .qr-code-container {
    width: 300px;
    height: 280px;
    left: 50%;
    top: 40px;
    transform: translateX(-50%);
  }
}



.qr-code-wrapper {
  width: 222px;
  height: 220px;
  border-radius: 20px;
  border: 1px solid #F2F2F2;
  background: #FAFAFA;
  box-shadow: 2px 4px 12px 0 rgba(0, 0, 0, 0.04);
  position: relative;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .qr-code-wrapper {
    width: 100%;
    height: 100%;
    border-radius: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 24px;
    box-sizing: border-box;
  }
}



.qr-code-image {
  width: 140px;
  height: 140px;
  aspect-ratio: 1/1;
  object-fit: contain;
  position: absolute;
  left: 41px;
  top: 20px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .qr-code-image {
    width: 180px;
    height: 180px;
    position: static;
    margin-bottom: 20px;
  }
}



.qr-code-link {
  color: #2019CE;
  font-family: Montserrat;
  font-size: 17px;
  font-weight: 600;
  line-height: 24px;
  position: absolute;
  left: 20px;
  top: 176px;
  width: 182px;
  height: 24px;
  text-align: center;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .qr-code-link {
    font-size: 20px;
    line-height: 28px;
    position: static;
    width: auto;
    height: auto;
    text-align: center;
  }
}



/* Terms Section */
.terms-checkbox-wrapper {
  position: absolute;
  left: 20px;
  top: 256px;
  z-index: 20;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .terms-checkbox-wrapper {
    position: relative;
    left: 0;
    top: 0;
    transform: scale(1.15);
    transform-origin: left center;
    margin: 20px 0;
  }
}



/* Share Button */
.share-button-container {
  position: absolute;
  left: 23px;
  top: 322px;
  z-index: 20;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .share-button-container {
    position: relative;
    left: 0;
    top: 0;
    margin: 20px 0;
    display: flex;
    justify-content: center;
  }
}



.share-button {
  display: flex;
  width: 300px;
  padding: 12px 48px;
  justify-content: center;
  align-items: center;
  gap: 10px;
  border-radius: 1000px;
  background: linear-gradient(90deg, #2019CE 0%, #473FFF 100%);
  border: none;
  cursor: pointer;
  height: 50px;
  color: #FFF;
  text-align: center;
  font-family: Montserrat;
  font-size: 16px;
  font-weight: 600;
  line-height: 26px;
  transition: all 0.2s ease;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .share-button {
    width: 400px;
    padding: 16px 64px;
    height: 60px;
    font-size: 18px;
    line-height: 28px;
  }
}



.share-button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(32, 25, 206, 0.3);
}

.share-button-disabled {
  background: #E2E2E2 !important;
  color: #989898 !important;
  cursor: not-allowed;
}

.share-button-loading {
  background: linear-gradient(90deg, #1a16a8 0%, #3830d9 100%) !important;
  cursor: wait !important;
}

/* Tailwind utility classes for the loading spinner */
.flex {
  display: flex;
}

.items-center {
  align-items: center;
}

.gap-2 {
  gap: 8px;
}

.animate-spin {
  animation: spin 1s linear infinite;
}

.h-4 {
  height: 16px;
}

.w-4 {
  width: 16px;
}

.opacity-25 {
  opacity: 0.25;
}

.opacity-75 {
  opacity: 0.75;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* How to Section */
.how-to-section {
  position: relative;
  left: 14px;
  top: -60px;
  width: 347px;
  height: 410px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .how-to-section {
    left: 0;
    top: 0;
    width: 100%;
    height: auto;
    min-height: 480px;
    margin-top: 40px;
  }
}



.steps-container {
  position: relative;
  width: 100%;
  height: 100%;
}

/* How to Header */
.how-to-header {
  position: absolute;
  left: 0;
  top: 0;
  width: 229px;
  height: 60px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 12px;
}

.how-to-title {
  color: #02070E;
  font-family: Montserrat;
  font-size: 20px;
  font-weight: 700;
  line-height: 24px;
  margin: 0;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .how-to-title {
    font-size: 28px;
    line-height: 34px;
  }
}



.how-to-subtitle {
  color: #4B4D50;
  font-family: Montserrat;
  font-size: 16px;
  font-weight: 500;
  line-height: 24px;
  margin: 0;
  align-self: stretch;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .how-to-subtitle {
    font-size: 20px;
    line-height: 28px;
  }
}



/* Step Indicators */
.step-indicators {
  position: absolute;
  left: 27px;
  top: 88px;
  width: 298px;
  height: 40px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .step-indicators {
    left: 50%;
    top: 120px;
    width: 400px;
    height: 48px;
    transform: translateX(-50%);
  }
}



.step-indicator-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 24px;
  width: 100%;
  height: 100%;
  position: relative;
}

.step-line {
  width: 44px;
  height: 1px;
  background: #7E7E7E;
}

.step-line-1 {
  position: absolute;
  left: 62px;
  top: 20px;
}

.step-line-2 {
  position: absolute;
  left: 192px;
  top: 19px;
}

.step-indicator {
  width: 38px;
  height: 40px;
  border-radius: 0 100px 100px 0;
  background: #2019CE;
}

.step-indicator-1 {
  position: absolute;
  left: 0;
  top: 0;
}

.step-indicator-2 {
  position: absolute;
  left: 130px;
  top: 0;
}

.step-indicator-3 {
  position: absolute;
  left: 260px;
  top: 0;
}

/* Step Descriptions */
.step-descriptions {
  position: absolute;
  left: 0;
  top: 144px;
  width: 100%;
  height: 44px;
  display: flex;
  justify-content: space-between;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .step-descriptions {
    top: 190px;
    height: 56px;
    justify-content: center;
    gap: 80px;
  }
}



.step-description {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  text-align: center;
}

.step-description-1 {
  width: 92px;
}

.step-description-2 {
  width: 96px;
  justify-content: center;
}

.step-description-3 {
  width: 74px;
  justify-content: center;
}

.step-number {
  color: #4B4D50;
  font-family: Montserrat;
  font-size: 16px;
  font-weight: 500;
  line-height: 24px;
}

.step-description-2 .step-number,
.step-description-3 .step-number {
  font-size: 14px;
}

.step-text {
  color: #4B4D50;
  font-family: Montserrat;
  font-size: 12px;
  font-weight: 500;
  line-height: 16px;
}

.step-number-row {
  display: flex;
  align-items: center;
  gap: 6px;
  justify-content: center;
}

.step-icon {
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Web Referral Link Section */
.web-link-section {
  position: absolute;
  left: 0;
  top: 202px;
  width: 347px;
  height: 208px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .web-link-section {
    position: relative;
    left: 0;
    top: 0;
    width: 100%;
    height: 260px;
    margin-top: 80px;
  }
}



.web-link-background {
  width: 347px;
  height: 206px;
  border-radius: 24px;
  background: linear-gradient(93deg, #000482 33.15%, rgba(3, 0, 155, 0.84) 76.97%);
  backdrop-filter: blur(32px);
  position: absolute;
  left: 0;
  top: 2px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .web-link-background {
    width: 100%;
    height: 258px;
    top: 0;
  }
}



.web-link-content {
  position: relative;
  z-index: 10;
  padding: 20px;
}

.web-link-header {
  width: 204px;
  height: 86px;
  margin-bottom: 28px;
}

.web-link-title {
  color: #FFF;
  font-family: Montserrat;
  font-size: 26px;
  font-weight: 700;
  line-height: 30px;
  margin: 0 0 12px 0;
  width: 244px;
  height: 30px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .web-link-title {
    font-size: 32px;
    line-height: 38px;
    width: auto;
    height: auto;
  }
}



.web-link-description {
  color: #FFF;
  font-family: Montserrat;
  font-size: 16px;
  font-weight: 500;
  line-height: 24px;
  margin: 0;
  width: 204px;
  height: 48px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .web-link-description {
    font-size: 20px;
    line-height: 28px;
    width: auto;
    height: auto;
  }
}



/* Copy Link Container */
.copy-link-container {
  width: 307px;
  height: 52px;
  position: relative;
  border-radius: 100px;
  border: 1px solid rgba(32, 25, 206, 0.60);
  background: rgba(255, 255, 255, 0.10);
  display: flex;
  align-items: center;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@media (min-width: 376px) and (max-width: 1024px) {
  .copy-link-container {
    width: calc(100% - 40px);
    height: 60px;
    max-width: 500px;
  }
}



.copy-link-copied-state {
  border: 1px solid #07B80E;
  background: #129E0F;
  transform: scale(1.02);
}

.copy-link-input-wrapper {
  flex: 1;
  padding: 14px 24px;
}

.copy-link-text {
  color: #FAFAFA;
  font-family: Montserrat;
  font-size: 17px;
  font-weight: 600;
  line-height: 24px;
  text-decoration: underline;
  width: 182px;
  height: 24px;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .copy-link-text {
    font-size: 20px;
    line-height: 28px;
    width: auto;
    height: auto;
  }
}



.copy-link-copied-full {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 14px 24px;
  box-sizing: border-box;
  animation: fadeInScale 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes fadeInScale {
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.copy-link-copied-text {
  color: #FFF;
  font-family: Montserrat;
  font-size: 14px;
  font-weight: 600;
  line-height: 22px;
  text-align: center;
  animation: slideInLeft 0.3s ease-out 0.1s both;
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.copy-link-copied-icon {
  position: relative;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: bounceIn 0.5s ease-out 0.2s both;
}

@keyframes bounceIn {
  0% {
    opacity: 0;
    transform: scale(0.3) rotate(-10deg);
  }
  50% {
    opacity: 0.9;
    transform: scale(1.1) rotate(5deg);
  }
  80% {
    transform: scale(0.95) rotate(-2deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

.copy-button {
  width: 50px;
  height: 52px;
  border-radius: 0 100px 100px 0;
  border: 1px solid #443FCC;
  background: #FAFAFA;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

@media (min-width: 376px) and (max-width: 1024px) {
  .copy-button {
    width: 60px;
    height: 60px;
  }
}



.copy-button:hover {
  background: #e8e8ff;
  transform: translateY(-1px) scale(1.02);
  box-shadow: 0 4px 12px rgba(68, 63, 204, 0.3);
}

.copy-button:active {
  transform: translateY(0) scale(0.98);
}

.copy-icon {
  display: flex;
  width: 24px;
  height: 24px;
  padding: 1.5px;
  justify-content: center;
  align-items: center;
  color: #443FCC;
  transition: transform 0.2s ease;
}

.copy-button:hover .copy-icon {
  transform: scale(1.1);
}

.copy-tick-svg {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* Responsive Design */

/* Small Mobile (up to 375px) */
@media (max-width: 375px) {
  .holders-view {
    width: 100vw;
    max-width: 100vw;
  }

  .content-container {
    width: 100vw;
    max-width: 100vw;
    padding: 16px 0 80px 0;
  }

  .referral-header {
    width: calc(100vw - 28px);
    left: 14px;
    margin-bottom: 16px;
    height: 44px;
  }

  .referral-title {
    font-size: 18px;
    line-height: 22px;
  }

  .referral-subtitle {
    font-size: 14px;
    line-height: 20px;
  }

  .scroll-content {
    width: calc(100vw - 28px);
    left: 14px;
    gap: 16px;
    height: auto;
    min-height: 420px;
    margin-top: 40px;
  }

  .qr-section {
    width: calc(100vw - 28px);
    height: 320px;
    position: relative;
    margin-bottom: 20px;
  }

  .qr-background {
    border-radius: 20px;
  }

  .qr-code-container {
    width: 180px;
    height: 180px;
    left: 50%;
    top: 30px;
    transform: translateX(-50%);
  }

  .qr-code-wrapper {
    width: 100%;
    height: 100%;
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 16px;
    box-sizing: border-box;
  }

  .qr-code-image {
    width: 110px;
    height: 110px;
    position: static;
    margin-bottom: 12px;
  }

  .qr-code-link {
    font-size: 14px;
    line-height: 20px;
    position: static;
    width: auto;
    height: auto;
    text-align: center;
  }

  .terms-checkbox-wrapper {
    position: relative;
    left: 0;
    top: 0;
    transform: scale(0.9);
    transform-origin: left center;
    margin: 12px 0;
  }

  .share-button-container {
    position: relative;
    left: 0;
    top: 0;
    margin: 16px 0;
    display: flex;
    justify-content: center;
  }

  .share-button {
    width: 280px;
    padding: 10px 32px;
    height: 44px;
    font-size: 14px;
    line-height: 20px;
  }

  .how-to-section {
    width: calc(100vw - 28px);
    height: auto;
    min-height: 300px;
    margin-top: 20px;
    left: 0;
    top: 0;
  }

  .how-to-title {
    font-size: 18px;
    line-height: 22px;
  }

  .how-to-subtitle {
    font-size: 14px;
    line-height: 20px;
  }

  .step-indicators {
    left: 50%;
    top: 100px;
    width: 240px;
    height: 32px;
    transform: translateX(-50%);
  }

  .step-line {
    width: 32px;
  }

  .step-line-1 {
    left: 46px;
    top: 16px;
  }

  .step-line-2 {
    left: 148px;
    top: 16px;
  }

  .step-indicator {
    width: 30px;
    height: 32px;
  }

  .step-indicator-2 {
    left: 105px;
  }

  .step-indicator-3 {
    left: 210px;
  }

  .step-descriptions {
    top: 150px;
    height: 40px;
    justify-content: center;
    gap: 50px;
  }

  .step-number {
    font-size: 14px;
    line-height: 20px;
  }

  .step-text {
    font-size: 10px;
    line-height: 14px;
  }

  .web-link-section {
    width: calc(100vw - 28px);
    height: 180px;
    margin-top: 40px;
    position: relative;
    left: 0;
    top: 0;
  }

  .web-link-background {
    width: 100%;
    height: 178px;
    border-radius: 20px;
  }

  .web-link-content {
    padding: 16px;
  }

  .web-link-title {
    font-size: 20px;
    line-height: 24px;
    width: auto;
    height: auto;
    margin-bottom: 8px;
  }

  .web-link-description {
    font-size: 13px;
    line-height: 18px;
    width: auto;
    height: auto;
    margin-bottom: 20px;
  }

  .copy-link-container {
    width: calc(100% - 32px);
    height: 44px;
    max-width: none;
  }

  .copy-link-text {
    font-size: 14px;
    line-height: 20px;
    width: auto;
    height: auto;
  }

  .copy-button {
    width: 44px;
    height: 44px;
  }

  .copy-icon {
    width: 20px;
    height: 20px;
  }

  /* Scale F-icons for small mobile */
  .f-icon-1 {
    width: 80px;
    height: 80px;
    left: -20px;
    top: -10px;
  }

  .f-icon-2 {
    width: 40px;
    height: 40px;
    left: 85%;
    top: 70%;
  }

  .f-icon-3 {
    width: 100px;
    height: 100px;
    left: -30px;
    top: 70%;
  }

  .f-icon-4 {
    width: 80px;
    height: 80px;
    left: 80%;
    top: 10px;
  }
}

/* Tablet (376px to 1024px) */
@media (min-width: 376px) and (max-width: 1024px) {
  .holders-view {
    width: 100vw;
    max-width: 100vw;
    box-shadow: none;
    background: #F0F0F0;
  }

  .content-container {
    width: 100vw;
    max-width: 100vw;
    padding: 32px 0 120px 0;
  }

  /* Scale F-icons for tablet */
  .f-icon-1 {
    width: 160px;
    height: 160px;
    left: -30px;
    top: -20px;
  }

  .f-icon-2 {
    width: 80px;
    height: 80px;
    left: 80%;
    top: 60%;
  }

  .f-icon-3 {
    width: 200px;
    height: 200px;
    left: -50px;
    top: 65%;
  }

  .f-icon-4 {
    width: 160px;
    height: 160px;
    left: 70%;
    top: 20px;
  }

  /* Adjust step indicators for tablet */
  .step-line {
    width: 60px;
  }

  .step-line-1 {
    left: 88px;
  }

  .step-line-2 {
    left: 252px;
  }

  .step-indicator {
    width: 48px;
    height: 50px;
  }

  .step-indicator-2 {
    left: 176px;
  }

  .step-indicator-3 {
    left: 352px;
  }

  .step-number {
    font-size: 18px;
    line-height: 26px;
  }

  .step-text {
    font-size: 14px;
    line-height: 18px;
  }
}

/* Desktop (1025px and above) */
@media (min-width: 1025px) {
  .holders-view {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    border-radius: 16px;
    overflow: hidden;
  }

  .content-container {
    width: 100%;
    padding: 40px 0 100px 0;
  }

  .referral-header {
    width: calc(100% - 76px);
    left: 38px;
    gap: 8px;
    height: 70px;
    margin-bottom: 32px;
  }

  .referral-title {
    font-size: 32px;
    line-height: 38px;
  }

  .referral-subtitle {
    font-size: 20px;
    line-height: 28px;
  }

  .scroll-content {
    width: calc(100% - 76px);
    left: 38px;
    gap: 32px;
    height: auto;
    min-height: 600px;
    margin-top: 80px;
  }

  .qr-section {
    width: 100%;
    height: 450px;
    position: relative;
    margin-bottom: 40px;
  }

  .qr-background {
    border-radius: 32px;
  }

  .qr-code-container {
    width: 350px;
    height: 320px;
    left: 50%;
    top: 60px;
    transform: translateX(-50%);
  }

  .qr-code-wrapper {
    width: 100%;
    height: 100%;
    border-radius: 32px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 32px;
    box-sizing: border-box;
  }

  .qr-code-image {
    width: 220px;
    height: 220px;
    position: static;
    margin-bottom: 24px;
  }

  .qr-code-link {
    font-size: 22px;
    line-height: 30px;
    position: static;
    width: auto;
    height: auto;
    text-align: center;
  }

  .share-button {
    width: 500px;
    padding: 18px 80px;
    height: 66px;
    font-size: 20px;
    line-height: 30px;
  }

  .how-to-section {
    width: 100%;
    height: auto;
    min-height: 500px;
    margin-top: 60px;
    left: 0;
    top: 0;
  }

  .how-to-title {
    font-size: 32px;
    line-height: 38px;
  }

  .how-to-subtitle {
    font-size: 22px;
    line-height: 30px;
  }

  .step-indicators {
    left: 50%;
    top: 140px;
    width: 500px;
    height: 60px;
    transform: translateX(-50%);
  }

  .step-line {
    width: 80px;
  }

  .step-line-1 {
    left: 110px;
  }

  .step-line-2 {
    left: 310px;
  }

  .step-indicator {
    width: 60px;
    height: 60px;
  }

  .step-indicator-2 {
    left: 220px;
  }

  .step-indicator-3 {
    left: 440px;
  }

  .step-descriptions {
    top: 220px;
    height: 70px;
    justify-content: center;
    gap: 120px;
  }

  .step-number {
    font-size: 20px;
    line-height: 28px;
  }

  .step-text {
    font-size: 16px;
    line-height: 22px;
  }

  .web-link-section {
    width: 100%;
    height: 300px;
    margin-top: 100px;
    position: relative;
    left: 0;
    top: 0;
  }

  .web-link-background {
    width: 100%;
    height: 298px;
    border-radius: 32px;
  }

  .web-link-content {
    padding: 40px;
  }

  .web-link-title {
    font-size: 36px;
    line-height: 42px;
    width: auto;
    height: auto;
    margin-bottom: 16px;
  }

  .web-link-description {
    font-size: 22px;
    line-height: 30px;
    width: auto;
    height: auto;
    margin-bottom: 40px;
  }

  .copy-link-container {
    width: calc(100% - 80px);
    height: 70px;
    max-width: none;
  }

  .copy-link-text {
    font-size: 22px;
    line-height: 30px;
    width: auto;
    height: auto;
  }

  .copy-button {
    width: 70px;
    height: 70px;
  }

  .copy-icon {
    width: 32px;
    height: 32px;
  }

  /* Scale F-icons for desktop */
  .f-icon-1 {
    width: 200px;
    height: 200px;
    left: -40px;
    top: -30px;
  }

  .f-icon-2 {
    width: 100px;
    height: 100px;
    left: 85%;
    top: 60%;
  }

  .f-icon-3 {
    width: 250px;
    height: 250px;
    left: -70px;
    top: 65%;
  }

  .f-icon-4 {
    width: 200px;
    height: 200px;
    left: 75%;
    top: 30px;
  }
}

/* Touch-friendly optimizations */
.holders-view {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

button {
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}

button:active {
  transform: scale(0.98);
  transition: transform 0.1s ease;
}
</style>
